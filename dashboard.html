<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Dashboard â€” WeSellGadgets</title>
  <link rel="stylesheet" href="normalize.css">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body class="dashboard-body">

<!-- â”€â”€ NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header class="dash-header">
  <a href="index.html" class="dash-logo">
    <div id="logo">
      <p id="logo-text">wesell<span>gadgets</span></p>
  </div>
</a>
  <nav class="dash-nav">
    <button class="dash-tab active" data-tab="products">Products</button>
    <button class="dash-tab" data-tab="add-product" id="addProductTab">+ Add Product</button>
    <button class="dash-tab super-only hidden" data-tab="users">Users</button>
    <button id="logoutBtn" class="btn-ghost">Logout</button>
  </nav>
  <div class="dash-user-info">
    <span id="dashUserName">Loadingâ€¦</span>
    <span id="dashUserRole" class="role-badge"></span>
  </div>
</header>

<!-- â”€â”€ MAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<main class="dash-main">

  <!-- LOGIN GATE (shown when not logged in) -->
  <section id="loginGate" class="dash-gate">
    <div class="gate-card glass-card">
      <h2>Admin Login</h2>
      <p>Sign in to manage products</p>
      <form id="loginForm">
        <input type="email"    id="loginEmail"    placeholder="Email"    required>
        <input type="password" id="loginPassword" placeholder="Password" required>
        <button type="submit"  class="btn-primary">Sign In</button>
        <p id="loginError" class="error-msg hidden"></p>
      </form>
    </div>
  </section>

  <!-- DASHBOARD CONTENT (hidden until logged in) -->
  <div id="dashContent" class="hidden">

    <!-- â”€â”€ PRODUCTS TAB â”€â”€ -->
    <section class="dash-panel" id="tab-products">
      <div class="panel-header">
        <h2>My Products</h2>
        <div class="panel-controls">
          <input type="text" id="dashSearch" placeholder="Search productsâ€¦" class="dash-search-input">
          <select id="dashCatFilter" class="dash-select">
            <option value="">All Categories</option>
            <option value="phone">Phones</option>
            <option value="laptop">Laptops</option>
            <option value="tablet">Tablets</option>
            <option value="desktop">Desktops</option>
            <option value="gaming">Gaming</option>
            <option value="accessory">Accessories</option>
          </select>
        </div>
      </div>
      <div id="dashProductGrid" class="dash-product-grid">
        <p class="loading-msg">Loading productsâ€¦</p>
      </div>
    </section>

    <!-- â”€â”€ ADD / EDIT PRODUCT TAB â”€â”€ -->
    <section class="dash-panel hidden" id="tab-add-product">
        <h2 id="formTitle">Add New Product</h2>
      <form id="productForm" class="product-form glass-card" enctype="multipart/form-data">
        <input type="hidden" id="editingProductId">

        <div class="form-row">
          <div class="form-group">
            <label>Product Name *</label>
            <input type="text" id="pName" placeholder="e.g. iPhone 15 Pro Max" required>
          </div>
          <div class="form-group">
            <label>Category *</label>
            <select id="pCategory" required>
              <option value="">Selectâ€¦</option>
              <option value="phone">Phone</option>
              <option value="laptop">Laptop</option>
              <option value="tablet">Tablet</option>
              <option value="desktop">Desktop</option>
              <option value="gaming">Gaming Console</option>
              <option value="accessory">Accessory</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Condition *</label>
            <select id="pCondition" required>
              <option value="">Selectâ€¦</option>
              <option value="new">New</option>
              <option value="used">Used (UK/US/NG)</option>
              <option value="refurbished">Refurbished</option>
            </select>
          </div>
          <div class="form-group">
            <label>Price (â‚¦) *</label>
            <input type="number" id="pPrice" placeholder="e.g. 1000000" min="0" required>
          </div>
          <div class="form-group">
            <label>Quantity</label>
            <input type="number" id="pQty" value="1" min="0">
          </div>
        </div>

        <div class="form-group full-width">
          <label>Specs / Description</label>
          <textarea id="pSpecs" rows="4"
            placeholder="RAM, Storage, Processor, Screen size, Battery, OS, Color, etc."></textarea>
        </div>

        <div class="form-group full-width">
          <label>Search Keywords (comma-separated)</label>
          <input type="text" id="pKeywords"
            placeholder="e.g. apple, 16gb ram, 512gb, m3 chip, macbook">
          <small>These power the site search. Be specific.</small>
        </div>

        <div class="form-group full-width">
          <label>WhatsApp Order Link</label>
          <input type="url" id="pWhatsapp"
            value="https://wa.me/+2347039661343" placeholder="https://wa.me/â€¦">
        </div>

        <!-- â”€â”€ PRODUCT SPECIFICATIONS â”€â”€ -->
        <p class="form-section-title">Product Specifications</p>

        <div class="form-row">
          <div class="form-group">
            <label>Brand</label>
            <input type="text" id="pBrand" placeholder="e.g. Dell, Apple, Samsung">
          </div>
          <div class="form-group">
            <label>RAM</label>
            <input type="text" id="pRam" placeholder="e.g. 16GB">
          </div>
          <div class="form-group">
            <label>Processor / Core</label>
            <input type="text" id="pProcessor" placeholder="e.g. Intel Core i7">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Storage</label>
            <input type="text" id="pStorage" placeholder="e.g. 512GB SSD">
          </div>
          <div class="form-group">
            <label>Screen Size</label>
            <input type="text" id="pScreenSize" placeholder="e.g. 14 inches">
          </div>
          <div class="form-group">
            <label>Operating System</label>
            <input type="text" id="pOs" placeholder="e.g. Windows 11 Pro">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Supplier</label>
            <input type="text" id="pSupplier" placeholder="e.g. Realmsoft">
          </div>
          <div class="form-group full-width">
            <label>Video URL <small>(optional)</small></label>
            <input type="url" id="pVideoUrl" placeholder="https://â€¦  (mp4 link)">
          </div>
        </div>

        <!-- â”€â”€ PRODUCT ID â”€â”€ -->
        <p class="form-section-title">Product ID</p>

        <div class="form-group full-width">
          <label>Custom Product ID
            <small>(auto-generated â€” edit if needed)</small>
          </label>
          <div style="display:flex;gap:8px;align-items:center;margin-top:4px">
            <input type="text" id="pCustomId"
                  placeholder="Will be generated when you fill Name + Category"
                  style="font-family:monospace;letter-spacing:1px">
            <button type="button" id="regenIdBtn" class="btn-ghost"
                    style="white-space:nowrap;height:40px">â†º Regenerate</button>
          </div>
          <div id="productIdPreview" class="product-id-preview" style="display:none"></div>
        </div>


        <div class="form-group full-width">
          <label>Product Images * <small>(first image = primary, max 6)</small></label>
          <div class="image-upload-zone" id="imageUploadZone">
            <input type="file" id="pImages" accept="image/*" multiple>
            <p>ðŸ“· Drag & drop or click to upload images</p>
          </div>
          <div id="imagePreviewRow" class="image-preview-row"></div>
          <!-- Edit mode: existing images -->
          <div id="existingImagesRow" class="image-preview-row"></div>
        </div>

        <div class="form-row">
          <label class="toggle-label">
            <input type="checkbox" id="pPublished" checked>
            <span>Published (visible on homepage)</span>
          </label>
        </div>

        <div class="form-actions">
          <button type="button" id="cancelEditBtn" class="btn-ghost hidden">Cancel</button>
          <button type="submit" class="btn-primary" id="submitProductBtn">
            Save Product
          </button>
        </div>
        <p id="formMsg" class="form-msg hidden"></p>
      </form>
    </section>

    <!-- â”€â”€ USERS TAB (Super Admin only) â”€â”€ -->
    <section class="dash-panel hidden" id="tab-users">
      <div class="panel-header">
        <h2>User Management</h2>
        <button id="addUserBtn" class="btn-primary">+ Add Admin</button>
      </div>
      <div id="userTable" class="user-table">
        <p class="loading-msg">Loading usersâ€¦</p>
      </div>

      <!-- Add User Modal -->
      <div id="addUserModal" class="modal hidden">
        <div class="modal-card glass-card">
          <h3>Create New Admin</h3>
          <form id="addUserForm">
            <input type="text"     id="newUserName"     placeholder="Full Name" required>
            <input type="email"    id="newUserEmail"    placeholder="Email"     required>
            <input type="password" id="newUserPassword" placeholder="Password" required>
            <select id="newUserRole">
              <option value="admin">Admin</option>
              <option value="super_admin">Super Admin</option>
            </select>
            <div class="modal-actions">
              <button type="button" id="closeModalBtn" class="btn-ghost">Cancel</button>
              <button type="submit" class="btn-primary">Create</button>
            </div>
            <p id="addUserMsg" class="form-msg hidden"></p>
          </form>
        </div>
      </div>
    </section>

  </div><!-- /dashContent -->
</main>

<script type="module" src="dashboard.js"></script>
</body>
</html>
