<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>We sell high quality gadgets in Nigeria and deliver Nationwide</title>
        
        <link rel="stylesheet" href="normalize.css">
        <link rel="stylesheet" href="styles.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Google+Sans:ital,opsz,wght@0,17..18,400..700;1,17..18,400..700&display=swap" rel="stylesheet">

    </head>
    <body>
        

        <div id="body-container">
            <nav class="nav-bar">
            <!-- Logo on the Left -->
            <div id="logo">
                <div id="logo-circle">
                <div id="logo-bar"></div>
                </div>
                <p id="logo-text">wesell<span>gadgets</span></p>
            </div>
        
            <!-- Right Side: Links + Hamburger -->
            <div class="nav-right">
                
                <!-- Navigation Links -->
                <div class="nav-links">
                <a href="#" class="active">Home</a>
                <a href="#" class="feed products" >Products</a>
                <a href="#">About</a>
                <a href="#">Contact</a>
                <a href="https://wa.me/2348012345678" target="_blank">Order on WhatsApp</a>
                </div>
        
                <!-- Hamburger Menu (always on far right) -->
                <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                </div>
            </div>          
            </nav>


            <div class="product-feed-full">
                <h2>Explore our Product Feed</h2>
                
                <div class="product-cards-wrapper">

                <div class="product-card-container">
                    <div class="product-media-container">
                        <div class="product-media-wrapper" id="mediaWrapper" tabindex="0">
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                    
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>


                                <div class="video-container product-media ">
                                    <video 
                                        class="product-media-video"
                                        src="media/herovideo.mp4" 
                                        type="video/mp4" 
                                        muted
                                        playsinline
                                        id="productVideo">
                                    </video>

                                    <div class="video-controls" id="videoControls">
                                        <button class="play-btn" id="playToggle">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M8 5v14l11-7z"/> 
                                            </svg>
                                        </button>
                                        
                                        <span class="video-time" id="timeDisplay">0:00 / 0:00</span>
                                    </div>
                                </div>

                        </div>

                        <div class="product-pagination" id="pagination"></div>
                       
                        <button id="fullscreenToggle" class="fullscreen-button" aria-label="Toggle fullscreen">
                            <svg width="24" height="24" viewBox="0 0 24 24" class="enter-icon">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                            <svg width="24" height="24" viewBox="0 0 24 24" class="exit-icon" style="display: none;">
                                <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm1-8h-3v2h5V5h-2v3z"/>
                            </svg>
                        </button>

                        <button class="add-to-cart">
                            <img src="media/add-to-cart.png" alt="add-to-cart-image"> 
                        </button>

                    </div>                    
                        
                    <div class="product-info">
                        <h3 class="product-name">iPhone 11 Pro max</h3>
                        <p class="condition">New</p>
                        <p class="quantity">(1 of - Sold)</p>
                        <p class="specs" id="specs-text">Specs/info SpecsSpecsSpecsSpecsSpecsSpecsSpecsSpecSpecsSpecsSpecsSpecsSpecsSpecsSpecsSpec
                            SpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsS
                        </p>
                        <p class="show-more" id="show-more-toggle" onclick="toggleSpecs()">Show more</p>
                        <p class="price"> ₦ 1, 000, 000</P>
                        <a href="https://wa.me/2348012345678"><button class="button-3">Order Now</button></a>

                    </div>
                </div>

                <div class="product-card-container">
                    <div class="product-media-container">
                        <div class="product-media-wrapper" id="mediaWrapper" tabindex="0">
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                    
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>


                                <div class="video-container product-media ">
                                    <video 
                                        class="product-media-video"
                                        src="media/herovideo.mp4" 
                                        type="video/mp4" 
                                        muted
                                        playsinline
                                        id="productVideo">
                                    </video>

                                    <div class="video-controls" id="videoControls">
                                        <button class="play-btn" id="playToggle">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M8 5v14l11-7z"/> 
                                            </svg>
                                        </button>
                                        
                                        <span class="video-time" id="timeDisplay">0:00 / 0:00</span>
                                    </div>
                                </div>

                        </div>

                        <div class="product-pagination" id="pagination"></div>
                       
                        <button id="fullscreenToggle" class="fullscreen-button" aria-label="Toggle fullscreen">
                            <svg width="24" height="24" viewBox="0 0 24 24" class="enter-icon">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                            <svg width="24" height="24" viewBox="0 0 24 24" class="exit-icon" style="display: none;">
                                <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm1-8h-3v2h5V5h-2v3z"/>
                            </svg>
                        </button>

                        <button class="add-to-cart">
                            <img src="media/add-to-cart.png" alt="add-to-cart-image"> 
                        </button>

                    </div>                    
                        
                    <div class="product-info">
                        <h3 class="product-name">iPhone 11 Pro max</h3>
                        <p class="condition">New</p>
                        <p class="quantity">(1 of - Sold)</p>
                        <p class="specs" id="specs-text">Specs/info SpecsSpecsSpecsSpecsSpecsSpecsSpecsSpecSpecsSpecsSpecsSpecsSpecsSpecsSpecsSpec
                            SpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsS
                        </p>
                        <p class="show-more" id="show-more-toggle" onclick="toggleSpecs()">Show more</p>
                        <p class="price"> ₦ 1, 000, 000</P>
                        <a href="https://wa.me/2348012345678"><button class="button-3">Order Now</button></a>

                    </div>
                </div>
                <div class="product-card-container">
                    <div class="product-media-container">
                        <div class="product-media-wrapper" id="mediaWrapper" tabindex="0">
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                    
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>


                                <div class="video-container product-media ">
                                    <video 
                                        class="product-media-video"
                                        src="media/herovideo.mp4" 
                                        type="video/mp4" 
                                        muted
                                        playsinline
                                        id="productVideo">
                                    </video>

                                    <div class="video-controls" id="videoControls">
                                        <button class="play-btn" id="playToggle">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M8 5v14l11-7z"/> 
                                            </svg>
                                        </button>
                                        
                                        <span class="video-time" id="timeDisplay">0:00 / 0:00</span>
                                    </div>
                                </div>

                        </div>

                        <div class="product-pagination" id="pagination"></div>
                       
                        <button id="fullscreenToggle" class="fullscreen-button" aria-label="Toggle fullscreen">
                            <svg width="24" height="24" viewBox="0 0 24 24" class="enter-icon">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                            <svg width="24" height="24" viewBox="0 0 24 24" class="exit-icon" style="display: none;">
                                <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm1-8h-3v2h5V5h-2v3z"/>
                            </svg>
                        </button>

                        <button class="add-to-cart">
                            <img src="media/add-to-cart.png" alt="add-to-cart-image"> 
                        </button>

                    </div>                    
                        
                    <div class="product-info">
                        <h3 class="product-name">iPhone 11 Pro max</h3>
                        <p class="condition">New</p>
                        <p class="quantity">(1 of - Sold)</p>
                        <p class="specs" id="specs-text">Specs/info SpecsSpecsSpecsSpecsSpecsSpecsSpecsSpecSpecsSpecsSpecsSpecsSpecsSpecsSpecsSpec
                            SpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsS
                        </p>
                        <p class="show-more" id="show-more-toggle" onclick="toggleSpecs()">Show more</p>
                        <p class="price"> ₦ 1, 000, 000</P>
                        <a href="https://wa.me/2348012345678"><button class="button-3">Order Now</button></a>

                    </div>
                </div>
                <div class="product-card-container">
                    <div class="product-media-container">
                        <div class="product-media-wrapper" id="mediaWrapper" tabindex="0">
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                    
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>
                                
                                <img 
                                    class="product-media-image product-media"
                                    crossorigin="anonymous" 
                                    alt="iPhone 11 Pro Max" 
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuDVeCRI8Cux4gtct16P1ZKU5d2x0Qj-KacC7lCclvojysB8fLBT9PR4mgW30O9HKko0ZH_vO2CnsK9PDIionB2R0TqgX9rILBU9Iudp7kvfXlrEBOvB6Iib2wkir3rBx5ulBLj57Cp17jNl-a7mkayIR8di1tmOB9qDpgcj9wvZsR7LrOj_RNY03i-wLFcb9BAXDRdFowuOdTAJW6MmXCojRmNypsdMOltrK-LmrxcYDMVnUYEl-ks9L4BW8md1PmPLfxBQgn3o8QQ"/>


                                <div class="video-container product-media ">
                                    <video 
                                        class="product-media-video"
                                        src="media/herovideo.mp4" 
                                        type="video/mp4" 
                                        muted
                                        playsinline
                                        id="productVideo">
                                    </video>

                                    <div class="video-controls" id="videoControls">
                                        <button class="play-btn" id="playToggle">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M8 5v14l11-7z"/> 
                                            </svg>
                                        </button>
                                        
                                        <span class="video-time" id="timeDisplay">0:00 / 0:00</span>
                                    </div>
                                </div>

                        </div>

                        <div class="product-pagination" id="pagination"></div>
                       
                        <button id="fullscreenToggle" class="fullscreen-button" aria-label="Toggle fullscreen">
                            <svg width="24" height="24" viewBox="0 0 24 24" class="enter-icon">
                                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                            </svg>
                            <svg width="24" height="24" viewBox="0 0 24 24" class="exit-icon" style="display: none;">
                                <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm1-8h-3v2h5V5h-2v3z"/>
                            </svg>
                        </button>

                        <button class="add-to-cart">
                            <img src="media/add-to-cart.png" alt="add-to-cart-image"> 
                        </button>

                    </div>                    
                        
                    <div class="product-info">
                        <h3 class="product-name">iPhone 11 Pro max</h3>
                        <p class="condition">New</p>
                        <p class="quantity">(1 of - Sold)</p>
                        <p class="specs" id="specs-text">Specs/info SpecsSpecsSpecsSpecsSpecsSpecsSpecsSpecSpecsSpecsSpecsSpecsSpecsSpecsSpecsSpec
                            SpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsSSpecsSpecsSpecsSpecsS
                        </p>
                        <p class="show-more" id="show-more-toggle" onclick="toggleSpecs()">Show more</p>
                        <p class="price"> ₦ 1, 000, 000</P>
                        <a href="https://wa.me/2348012345678"><button class="button-3">Order Now</button></a>

                    </div>
                </div>

            
            </div>
                
            </div>

    
        </div>

        <script>

        //Product details expand and collapse
            function toggleSpecs() {
              const specs = document.getElementById('specs-text');
              const toggle = document.getElementById('show-more-toggle');
              
              if (specs.classList.contains('expanded')) {
                specs.classList.remove('expanded');
                toggle.textContent = 'Show more';
              } else {
                specs.classList.add('expanded');
                toggle.textContent = 'Show less';
              }
            }

        // Image interactions
            const wrapper = document.getElementById('mediaWrapper');
            const container = wrapper.parentElement; // .product-media-container
            let isDown = false;
            let startX, startY, scrollLeft;
            let zoomedImg = null;
            let scale = 1;
            let translateX = 0;
            let translateY = 0;
            let isPanning = false;
            let startTranslateX, startTranslateY;
            let isPinching = false;
            let startDist = 0;
            let previousDist = 0;
            let lastTapTime = 0;
            let lastTapX = 0;
            let lastTapY = 0;
            let lastTapTarget = null;
            let tapStartTime = 0;
            let tapStartX = 0;
            let tapStartY = 0;
            let isMoved = false;

            // Update image transform and clamp pan to avoid blank areas
            function updateTransform() {
            if (scale > 1 && zoomedImg) {
                const zoomedW = parseFloat(zoomedImg.style.width);
                const zoomedH = parseFloat(zoomedImg.style.height);
                const viewW = container.clientWidth;
                const viewH = container.clientHeight;
                // Standard clamping: tx >= viewW - zoomedW, tx <= 0
                const minTx = Math.min(0, viewW - zoomedW);
                const minTy = Math.min(0, viewH - zoomedH);
                const maxTx = 0;
                const maxTy = 0;
                translateX = Math.max(minTx, Math.min(translateX, maxTx));
                translateY = Math.max(minTy, Math.min(translateY, maxTy));
                zoomedImg.style.transform = `translate(${translateX}px, ${translateY}px)`;
            }
            }

            // Zoom in to center
            function zoomInAt() {  // Always center, no px/py needed
            const viewW = container.clientWidth;
            const viewH = container.clientHeight;
            const naturalW = zoomedImg.naturalWidth;
            const naturalH = zoomedImg.naturalHeight;
            if (naturalW === 0 || naturalH === 0) {
                return; // Image not loaded; skip or handle asynchronously if needed
            }
            scale = 2.5;
            // Set zoomed styles for full image access
            zoomedImg.style.objectFit = 'none';
            zoomedImg.style.objectPosition = '0 0';
            const zoomedW = naturalW * scale;
            const zoomedH = naturalH * scale;
            zoomedImg.style.width = `${zoomedW}px`;
            zoomedImg.style.height = `${zoomedH}px`;
            // Set initial center translate, will be clamped
            translateX = (viewW - zoomedW) / 2;
            translateY = (viewH - zoomedH) / 2;
            zoomedImg.classList.add('is-zoomed');
            wrapper.style.overflowX = 'hidden';
            container.style.touchAction = 'none';
            updateTransform(); // Apply clamping immediately
            }

            // Zoom out
            function zoomOut() {
            scale = 1;
            translateX = 0;
            translateY = 0;
            if (zoomedImg) {
                zoomedImg.style.objectFit = 'cover';
                zoomedImg.style.objectPosition = 'center';
                zoomedImg.style.width = '100%';
                zoomedImg.style.height = '100%';
                zoomedImg.style.transform = 'none';
                zoomedImg.classList.remove('is-zoomed');
            }
            wrapper.style.overflowX = 'auto';
            container.style.touchAction = 'auto';
            zoomedImg = null;
            }

            // Distance between touches
            function distance(t1, t2) {
            return Math.hypot(t1.clientX - t2.clientX, t1.clientY - t2.clientY);
            }

            // Mouse events for swiping/panning
            // (The rest of the event listeners remain the same as in the previous version, with calls to updateTransform where needed)
            wrapper.addEventListener('mousedown', (e) => {
            if (e.button !== 0) return;
            if (zoomedImg && e.target === zoomedImg) {
                isPanning = true;
                startX = e.clientX;
                startY = e.clientY;
                startTranslateX = translateX;
                startTranslateY = translateY;
                zoomedImg.classList.add('dragging');
            } else {
                isDown = true;
                wrapper.classList.add('no-snap');
                startX = e.clientX - wrapper.offsetLeft;
                scrollLeft = wrapper.scrollLeft;
            }
            wrapper.style.cursor = 'grabbing';
            });

            wrapper.addEventListener('mouseleave', () => {
            isDown = false;
            isPanning = false;
            wrapper.classList.remove('no-snap');
            if (zoomedImg) zoomedImg.classList.remove('dragging');
            });

            wrapper.addEventListener('mouseup', () => {
            isDown = false;
            isPanning = false;
            wrapper.classList.remove('no-snap');
            if (zoomedImg) zoomedImg.classList.remove('dragging');
            wrapper.style.cursor = 'grab';
            });

            wrapper.addEventListener('mousemove', (e) => {
            if (isPanning) {
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
                translateX = startTranslateX + deltaX;
                translateY = startTranslateY + deltaY;
                updateTransform();
            } else if (isDown) {
                e.preventDefault();
                const x = e.clientX - wrapper.offsetLeft;
                const walk = (x - startX) * 2;
                wrapper.scrollLeft = scrollLeft - walk;
            }
            });

            // Double-click zoom
            wrapper.addEventListener('dblclick', (e) => {
            if (e.target.tagName === 'IMG') {
                const img = e.target;
                if (zoomedImg && zoomedImg !== img) {
                zoomOut();
                }
                if (zoomedImg === img) {
                zoomOut();
                } else {
                zoomedImg = img;
                zoomInAt();  // Always center
                }
            }
            });

            // Touch events for pan, pinch, swipe, double-tap
            wrapper.addEventListener('touchstart', (e) => {
            isMoved = false;
            if (e.touches.length === 1) {
                tapStartTime = Date.now();
                tapStartX = e.touches[0].clientX;
                tapStartY = e.touches[0].clientY;
                if (zoomedImg && e.target === zoomedImg) {
                isPanning = true;
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                startTranslateX = translateX;
                startTranslateY = translateY;
                }
            } else if (e.touches.length === 2 && zoomedImg) {
                isPinching = true;
                startDist = distance(e.touches[0], e.touches[1]);
                previousDist = startDist;
            }
            }, { passive: false });

            wrapper.addEventListener('touchmove', (e) => {
            if (e.touches.length === 1 && isPanning) {
                const deltaX = e.touches[0].clientX - startX;
                const deltaY = e.touches[0].clientY - startY;
                translateX = startTranslateX + deltaX;
                translateY = startTranslateY + deltaY;
                updateTransform();
                if (Math.hypot(deltaX, deltaY) > 10) isMoved = true;
            } else if (e.touches.length === 2 && isPinching) {
                const currentDist = distance(e.touches[0], e.touches[1]);
                const scaleFactor = currentDist / previousDist;
                const oldScale = scale;
                scale = Math.max(1, oldScale * scaleFactor);
                const naturalW = zoomedImg.naturalWidth;
                const naturalH = zoomedImg.naturalHeight;
                const zoomedW = naturalW * scale;
                const zoomedH = naturalH * scale;
                zoomedImg.style.width = `${zoomedW}px`;
                zoomedImg.style.height = `${zoomedH}px`;
                // Anchor at midpoint
                const rect = container.getBoundingClientRect();
                const midX = (e.touches[0].clientX + e.touches[1].clientX) / 2 - rect.left;
                const midY = (e.touches[0].clientY + e.touches[1].clientY) / 2 - rect.top;
                translateX = midX - scale * (midX - translateX) / oldScale;
                translateY = midY - scale * (midY - translateY) / oldScale;
                updateTransform();
                previousDist = currentDist;
            }
            wrapper.classList.add('no-snap');
            }, { passive: false });

            wrapper.addEventListener('touchend', (e) => {
            isPanning = false;
            isPinching = false;
            wrapper.classList.remove('no-snap');
            if (zoomedImg) zoomedImg.classList.remove('dragging');
            if (e.touches.length === 0 && e.changedTouches.length === 1) {
                const currentTime = Date.now();
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const deltaTime = currentTime - tapStartTime;
                const movedDist = Math.hypot(endX - tapStartX, endY - tapStartY);
                if (deltaTime < 250 && movedDist < 10) {
                // Tap detected
                const currentTapX = (tapStartX + endX) / 2;
                const currentTapY = (tapStartY + endY) / 2;
                const target = e.changedTouches[0].target;
                if (currentTime - lastTapTime < 300 && Math.hypot(currentTapX - lastTapX, currentTapY - lastTapY) < 10 && target === lastTapTarget) {
                    // Double tap
                    if (target.tagName === 'IMG') {
                    if (zoomedImg && zoomedImg === target) {
                        zoomOut();
                    } else {
                        zoomedImg = target;
                        zoomInAt();  // Always center
                    }
                    }
                    lastTapTime = 0;
                } else {
                    lastTapTime = currentTime;
                    lastTapX = currentTapX;
                    lastTapY = currentTapY;
                    lastTapTarget = target;
                }
                }
            }
            }, { passive: false });

        // Pagination setup
            const pagination = document.getElementById('pagination');
            const images = wrapper.querySelectorAll('.product-media');
            const numImages = images.length;

            // Create dots
            for (let i = 0; i < numImages; i++) {
            const dot = document.createElement('span');
            dot.classList.add('dot');
            dot.dataset.index = i;
            dot.addEventListener('click', () => {
                wrapper.scrollTo({ left: i * wrapper.clientWidth, behavior: 'smooth' });
            });
            pagination.appendChild(dot);
            }

            // Update active dot
            function updateActiveDot() {
            if (zoomedImg) return; // Skip if zoomed
            const index = Math.round(wrapper.scrollLeft / wrapper.clientWidth);
            pagination.querySelectorAll('.dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
            }

            // Listen for scroll
            wrapper.addEventListener('scroll', updateActiveDot);

            // Initial update
            updateActiveDot();

        // Fullscreen toggle
            const fullscreenButton = document.getElementById('fullscreenToggle');

            function toggleFullscreen() {
            if (!document.fullscreenElement) {
                container.requestFullscreen().catch(err => console.error('Fullscreen error:', err));
                fullscreenButton.classList.add('fullscreen');
            } else {
                document.exitFullscreen();
                fullscreenButton.classList.remove('fullscreen');
            }
            }

            fullscreenButton.addEventListener('click', toggleFullscreen);

            // Handle resize in fullscreen (recalculate zoom/pan)
            document.addEventListener('fullscreenchange', () => {
            if (zoomedImg) {
                updateTransform(); // Recalculate boundaries
            }
            });

            document.addEventListener('fullscreenchange', () => {
            if (zoomedImg) {
                updateTransform(); // Recalculate for new dimensions
                zoomedImg.style.objectFit = document.fullscreenElement ? 'contain' : 'cover'; // JS fallback if CSS pseudo fails
            }
            });

        //Image background blender
            document.addEventListener('DOMContentLoaded', () => {
                const containers = document.querySelectorAll('.product-media-container');

                containers.forEach(container => {
                    const img = container.querySelector('.product-media-image');
                    
                    if (!img) return;

                    const applyBlurredBackground = () => {
                    // Use the image source directly as blurred background
                    container.style.backgroundImage = `url(${img.src})`;
                    };

                    // Run when image loads
                    if (img.complete && img.naturalWidth) {
                    applyBlurredBackground();
                    } else {
                    img.onload = applyBlurredBackground;
                    }
                });
                });   
                
        //Video controls
                const video = document.getElementById('productVideo');
                const playBtn = document.getElementById('playToggle');
                const timeDisplay = document.getElementById('timeDisplay');
                const controlsContainer = document.getElementById('videoControls');
                const videoContainer = document.querySelector('.video-container');

                // Icons for Play and Pause
                const playIcon = '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>';
                const pauseIcon = '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

                // 1. Toggle Play/Pause
                function togglePlay(e) {
                    // Stop the click from bubbling up to the swipe/drag gallery logic
                    if(e) e.stopPropagation(); 

                    if (video.paused || video.ended) {
                        video.play();
                    } else {
                        video.pause();
                    }
                }

                // Update Button Icon based on state
                function updatePlayButton() {
                    if (video.paused) {
                        playBtn.innerHTML = playIcon;
                        videoContainer.classList.add('paused'); // Keep controls visible
                    } else {
                        playBtn.innerHTML = pauseIcon;
                        videoContainer.classList.remove('paused'); // Allow controls to fade out
                    }
                }

                // 2. Format Time (helper function)
                function formatTime(seconds) {
                    const m = Math.floor(seconds / 60);
                    const s = Math.floor(seconds % 60);
                    return `${m}:${s < 10 ? '0' : ''}${s}`;
                }

                // 3. Update Duration Text
                function updateProgress() {
                    const current = formatTime(video.currentTime);
                    const total = formatTime(video.duration || 0);
                    timeDisplay.textContent = `${current} / ${total}`;
                }

                // Event Listeners
                playBtn.addEventListener('click', togglePlay);
                video.addEventListener('click', togglePlay); // Click video to play/pause too
                video.addEventListener('play', updatePlayButton);
                video.addEventListener('pause', updatePlayButton);
                video.addEventListener('timeupdate', updateProgress);

                // Prevent the controls from triggering a drag event on your gallery
                controlsContainer.addEventListener('mousedown', (e) => e.stopPropagation());
                controlsContainer.addEventListener('touchstart', (e) => e.stopPropagation());

        </script>

    </body>

</html>